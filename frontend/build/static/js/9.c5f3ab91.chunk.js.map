{"version":3,"sources":["components/video/videoOffDiv.js","components/video/video.js","components/video/userCard.js","components/video/videoPlayer.js","views/video.js"],"names":["useStyles","makeStyles","theme","videoOffDiv","overflow","objectFit","backgroundSize","backgroundColor","palette","secondary","main","color","contrastText","display","alignItems","justifyItems","VideoOffDiv","props","classes","Paper","className","style","width","height","video","Typography","variant","name","audio","Video","console","log","peer","ref","useRef","useEffect","on","stream","current","srcObject","playsInline","controls","autoPlay","userDetailDiv","position","top","borderRadius","padding","userDiv","textAlign","spacing","margin","justifyContent","UserCard","Grid","container","item","xs","show","Card","refer","muted","dimension","dimensions","numpeers","gutterBottom","gridContainer","breakpoints","down","flexDirection","introLobby","gridAutoFlow","paper","boxShadow","chatRoom","chatRoomMainDiv","chatBox","zIndex","minWidth","maxHeight","bottom","right","left","chatBoxIntro","chatBoxMessages","messageList","overflowY","actionButtons","desktopButton","mobileButton","textfield","primary","videoConstraints","Room","React","memo","history","useHistory","currentRoom","useSelector","state","room","useState","inLobby","setInLobby","pendingRequest","setPendingRequest","message","setMessage","auth","token","peers","setPeers","allMessages","setWebSocket","window","screen","availHeight","videoHeight","setVideoHeight","availWidth","videoWidth","setVideoWidth","userVideo","messageBox","usersDiv","localstream","mystream","setMystream","myVideoTrack","setMyVideoTrack","setVideo","col","setCol","showRoomDetailModal","setShowRoomDetailModal","setShow","showDetails","setShowDetails","chatBoxOpen","setChatBoxOpen","allUsersBoxOpen","setAllUsersBoxOpen","setAudio","roomExist","setRoomExists","peersRef","anchorAvatarEl","setAnchorAvatarEl","searchUser","setSearchUser","getAllMessages","match","params","id","getTracks","map","track","stop","WebSocketInstance","close","length","scrollTop","scrollHeight","messages","n","filter","numCol","Math","sqrt","offsetHeight","offsetWidth","ceil","floor","numRow","getRoomDetails","created_by","pk","myuser","navigator","mediaDevices","getUserMedia","then","getVideoTracks","catch","err","toast","error","Boolean","socketRef","connect","location","protocol","host","includes","hostname","sharing_id","sendSignal","onlyChat","user","presentInUsers","all_users","indexOf","t","email","Button","onClick","toast_id","user_id","dismiss","icon","duration","payload","alert","push","users","allPeers","forEach","some","e","peerID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerName","userID","caller","incomingSignal","addPeer","peerObj","find","p","destroy","JSON","parse","first_name","addMessage","value","newPeers","i","shareScreen","getDisplayMedia","cursor","screenStream","index","replaceTrack","removeTrack","addTrack","onended","handleMessageSend","toggleChatBoxOpen","toggleAllUsersBoxOpen","handleVideoToggle","enabled","handleAudioToggle","getAudioTracks","disabled","meeting","gridTemplateColumns","content","event","currentTarget","startIcon","Menu","anchorEl","open","onClose","marginBottom","MenuItem","IconButton","chatBoxInput","TextField","onChange","target","onKeyPress","key","autoComplete","label","placeholder","InputProps","endAdornment","InputAdornment","SvgIcon","List","ListItem","ListItemIcon","Avatar","ListItemText","Divider","fullWidth","togglePeerShow","withRouter","userDimension","dispatch","handleSuccess","callback","setUserDimension","VideoView","Component","logoutUser"],"mappings":"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","file":"static/js/9.c5f3ab91.chunk.js","sourcesContent":["import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport {\n  Paper,\n  Typography\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\nimport MicIcon from '@material-ui/icons/Mic'\nimport MicOffIcon from '@material-ui/icons/MicOff'\n\nconst useStyles = makeStyles(theme => ({\n  videoOffDiv: {\n    overflow: 'hidden',\n    objectFit: 'fill',\n    backgroundSize: 'cover',\n    backgroundColor: theme.palette.secondary.main,\n    color: theme.palette.secondary.contrastText,\n    display: 'grid',\n    alignItems: 'center',\n    justifyItems: 'center'\n  }\n}))\nconst VideoOffDiv = props => {\n  const classes = useStyles()\n  // const dimensions = props.dimension / Math.sqrt(1 + props.numpeers)\n\n  return (\n    <Paper\n      className={classes.videoOffDiv}\n      style={{\n        width: props.width,\n        height: props.height,\n        display: props.video ? 'none' : ''\n      }}\n    >\n      <div>\n        <Typography variant='h5'>{props.name}</Typography>\n        {props.audio ? <MicIcon /> : <MicOffIcon />}\n      </div>\n    </Paper>\n  )\n}\n\nexport default VideoOffDiv\n","import { makeStyles } from '@material-ui/styles'\nimport React, { useEffect, useRef, useState } from 'react'\n\nconst useStyles = makeStyles(theme => ({\n  video: {\n    // width: '100%',\n    // height: '100%',SvgIcon\n    // width: window.screen.availWidth/1.2,\n    backgroundSize: 'cover',\n    objectFit: 'fill',\n    overflow: 'hidden'\n  }\n}))\nexport const Video = props => {\n  console.log(props.peer)\n  const ref = useRef()\n  // const dimension = useSelector(state => state.room.userDimension)\n  const classes = useStyles()\n  // const dimension = Math.sqrt(props.width * props.height) / 1.4\n\n  useEffect(() => {\n    console.log('video started')\n    props.peer &&\n      props.peer.on('stream', stream => {\n        console.log(stream)\n        ref.current.srcObject = stream\n      })\n  }, [])\n\n  return (\n    <video\n      playsInline\n      width={props.width}\n      height={props.height}\n      controls={true}\n      autoPlay\n      style={{ display: props.video ? 'block' : 'none' }}\n      className={classes.video}\n      ref={ref}\n    />\n  )\n}\n","import React from 'react'\nimport { useHistory } from 'react-router-dom'\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  Grid,\n  Paper,\n  Typography\n} from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\nimport MicIcon from '@material-ui/icons/Mic'\nimport MicOffIcon from '@material-ui/icons/MicOff'\nimport VideoOffDiv from './videoOffDiv'\nimport { Video } from './video'\n\nconst useStyles = makeStyles(theme => ({\n  video: {\n    backgroundSize: 'cover',\n    objectFit: 'fill',\n    overflow: 'hidden'\n  },\n  userDetailDiv: {\n    position: 'absolute',\n    top: '0.4rem',\n    // left: '6.25%',\n    color: 'white',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    // display: 'flex',\n    // alignItems: 'center',\n    // background: 'top',\n    height: '1.8rem',\n    borderRadius: '0.3rem',\n    // fontSize: '0.8rem',\n    padding: '0.2rem 0.4rem'\n  },\n  userDiv: {\n    textAlign: 'center',\n    position: 'relative',\n    padding: theme.spacing(1),\n    margin: theme.spacing(1),\n    display: 'grid',\n    justifyContent: 'center'\n  }\n}))\nconst UserCard = props => {\n  const classes = useStyles()\n  //   const dimensions = props.dimension / Math.sqrt(1 + props.numpeers)\n\n  return (\n    <Grid\n      container\n      item\n      xs={12}\n      // style={{'display':'none'}}\n      // xs={12}\n      className={classes.userDiv}\n      style={{'display' : props.show ? '' : 'none' }}\n    >\n      <Card>\n        {props.refer ? (\n          <video\n            width={props.width}\n            height={props.height}\n            playsInline\n            muted\n            controls={true}\n            style={{ display: props.video ? 'block' : 'none' }}\n            autoPlay\n            className={classes.video}\n            ref={props.refer}\n          />\n        ) : (\n          <Video\n            peer={props.peer.peer}\n            video={props.video}\n            dimension={props.dimensions}\n            width={props.width}\n            height={props.height}\n            numpeers={props.numpeers}\n          />\n        )}\n        <VideoOffDiv\n          name={props.name}\n          audio={props.audio}\n          video={props.video}\n          dimension={props.dimensions}\n          width={props.width}\n          height={props.height}\n          numpeers={props.numpeers}\n        />\n        <div\n          style={{ display: props.video ? 'block' : 'none' }}\n          className={classes.userDetailDiv}\n        >\n          <Typography variant='h5' gutterBottom>\n            {props.name} {props.audio ? <MicIcon /> : <MicOffIcon />}\n          </Typography>\n        </div>\n      </Card>\n      {/* </Paper> */}\n    </Grid>\n  )\n}\n\nexport default UserCard\n","import {\n  Grid,\n  Typography,\n  Paper,\n  makeStyles,\n  Button,\n  TextField,\n  InputAdornment,\n  SvgIcon,\n  StepLabel,\n  IconButton,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Avatar,\n  Divider,\n  Fab,\n  Menu,\n  MenuItem\n} from '@material-ui/core'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { useSelector } from 'react-redux'\nimport { useHistory, withRouter } from 'react-router'\n// import io from \"socket.io-client\";\nimport Peer from 'simple-peer'\nimport {\n  addMessage,\n  getAllMessages,\n  getRoomDetails,\n  setUserDimension\n} from '../../actions/chatRoomAction'\nimport toast, { Toaster } from 'react-hot-toast'\nimport TimeAgo from 'react-timeago'\n// import styled from \"styled-components\";\nimport WebSocketInstance from '../../websocket/socket'\nimport RoomDetailsModal from '../common/roomDataModal'\nimport VideocamIcon from '@material-ui/icons/Videocam'\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff'\nimport MicIcon from '@material-ui/icons/Mic'\nimport MicOffIcon from '@material-ui/icons/MicOff'\nimport CallEndIcon from '@material-ui/icons/CallEnd'\nimport ChatIcon from '@material-ui/icons/Chat'\nimport SendIcon from '@material-ui/icons/Send'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport DetailsIcon from '@material-ui/icons/Details'\nimport ScreenShareIcon from '@material-ui/icons/ScreenShare'\nimport VideoOffDiv from './videoOffDiv'\nimport RoomChat from '../rooms/roomChat'\nimport UserCard from './userCard'\nimport ChatBox from '../common/chatBox'\nimport GridOnIcon from '@material-ui/icons/GridOn'\nimport GridOffIcon from '@material-ui/icons/GridOff'\nimport MoreVertIcon from '@material-ui/icons/MoreVert'\nimport RoomData from '../rooms/roomData'\nimport GroupIcon from '@material-ui/icons/Group'\n\nconst useStyles = makeStyles(theme => ({\n  video: {\n    // width: '100%',\n    // height: '100%',SvgIcon\n    // width: window.screen.availWidth/1.2,\n    backgroundSize: 'cover',\n    objectFit: 'fill',\n    overflow: 'hidden'\n  },\n  gridContainer: {\n    justifyContent: 'center',\n    [theme.breakpoints.down('md')]: {\n      flexDirection: 'column'\n    }\n  },\n  introLobby: {\n    display: 'grid',\n    gridAutoFlow: 'column',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  paper: {\n    display: 'grid',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    // gridAutoFlow: 'column',\n    overflow: 'hidden',\n    height: '100%',\n    width: '100%',\n    boxShadow: 'none'\n    // [theme.breakpoints.down('sm')]: {\n    //   gridAutoFlow: 'row'\n    // }\n  },\n  userDetailDiv: {\n    position: 'absolute'\n    // marginLeft: '3%'\n  },\n  userDiv: {\n    textAlign: 'center',\n    position: 'relative',\n    padding: theme.spacing(1),\n    margin: theme.spacing(1)\n  },\n  chatRoom: {\n    height: '100%'\n  },\n  chatRoomMainDiv: {\n    display: 'grid',\n    gridAutoFlow: 'column',\n    width: '100%',\n    height: '100%',\n    position: 'relative'\n  },\n  chatBox: {\n    position: 'relative',\n    backgroundColor: theme.palette.secondary.main,\n    zIndex: 5,\n    // width: 'auto',\n    minWidth: '30vh',\n    maxHeight: '100%',\n    [theme.breakpoints.down('xs')]: {\n      position: 'absolute',\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      width: '100%',\n      height: '100%'\n    }\n  },\n  chatBoxIntro: {\n    padding: '2px'\n  },\n  chatBoxMessages: {\n    padding: '2px',\n    position: 'relative',\n    overflow: 'hidden',\n    height: '85%',\n    width: '100%'\n  },\n  messageList: {\n    maxHeight: '100%',\n    top: 0,\n    left: 0,\n    right: -theme.spacing(2),\n    position: 'absolute',\n    overflowY: 'scroll'\n  },\n  actionButtons: {\n    position: 'absolute',\n    bottom: 0,\n    display: 'grid',\n    justifyContent: 'center',\n    boxShadow: 'none',\n    gridAutoFlow: 'column',\n    zIndex: 3,\n    // left: '0',\n    // right: '0',\n    // marginLeft: 'auto',\n    // marginRight: 'auto',\n    right: 0,\n    left: 0\n    // [theme.breakpoints.up('md')]: {\n\n    // },\n    // [theme.breakpoints.down('xs')]: {\n    //   // gridAutoFlow: 'row'\n    // }\n    // left: '40%'\n  },\n  desktopButton: {\n    [theme.breakpoints.down('xs')]: {\n      display: 'none'\n    }\n  },\n  mobileButton: {\n    display: 'none',\n    [theme.breakpoints.down('xs')]: {\n      display: 'block'\n    }\n  },\n  textfield: {\n    position: 'absolute',\n    bottom: '0px',\n    width: '100%',\n    backgroundColor: theme.palette.primary.main\n  }\n}))\n\nconst videoConstraints = {\n  // height: usersDiv.current.offsetHeight,\n  // width: usersDiv.current.offsetWidth\n}\n\nconst Room = React.memo(props => {\n  const history = useHistory()\n  const currentRoom = useSelector(state => state.room.currentRoom)\n  const [inLobby, setInLobby] = useState(true)\n  const [pendingRequest, setPendingRequest] = useState(false)\n  const [message, setMessage] = useState()\n  const token = useSelector(state => state.auth.token)\n  const [peers, setPeers] = useState([])\n  const [streams, setStreams] = useState([])\n  const [allMessages, setAllMessages] = useState([])\n  const [websocket, setWebSocket] = useState([])\n  var socketRef = useRef()\n  var [dimension, setDimension] = useState(100)\n  var [videoHeight, setVideoHeight] = useState(window.screen.availHeight / 2.2)\n  var [videoWidth, setVideoWidth] = useState(window.screen.availWidth / 2.2)\n  const userVideo = useRef()\n  const messageBox = useRef()\n  // const duserVideo = useRef()\n  const usersDiv = useRef()\n  var localstream = useRef()\n  const [mystream, setMystream] = useState()\n  const [myVideoTrack, setMyVideoTrack] = useState(null)\n  const [video, setVideo] = useState(true)\n  const [col, setCol] = useState(0)\n  const [showRoomDetailModal, setShowRoomDetailModal] = useState(false)\n  const [show, setShow] = useState(true)\n  const [showDetails, setShowDetails] = useState(true)\n  const [chatBoxOpen, setChatBoxOpen] = useState(false)\n  const [allUsersBoxOpen, setAllUsersBoxOpen] = useState(false)\n  const [audio, setAudio] = useState(true)\n  const [roomExist, setRoomExists] = useState(false)\n  const peersRef = useRef([])\n  const classes = useStyles()\n  const [anchorAvatarEl, setAnchorAvatarEl] = useState(null)\n  const [searchUser, setSearchUser] = useState('')\n\n  // console.log(usersDiv)\n  useEffect(() => {\n    console.log('initialize')\n    props.getAllMessages(props.match.params.id)\n    return () => {\n      const tracks = localstream.current.getTracks()\n      tracks.map(track => {\n        track.stop()\n      })\n      localstream.current.getTracks()[1].stop()\n      WebSocketInstance.close()\n    }\n  }, [])\n\n  useEffect(() => {\n    console.log('peers changed')\n    console.log(peers)\n  }, [peers])\n\n  useEffect(() => {\n    console.log(allMessages.length)\n    if (messageBox.current) {\n      console.log(messageBox.current.scrollTop)\n      messageBox.current.scrollTop = messageBox.current.scrollHeight\n      console.log(messageBox.current.scrollTop)\n    }\n  }, [messageBox.current, props.messages.length])\n\n  useEffect(() => {\n    if (usersDiv.current) {\n      // const d =\n      //   Math.sqrt(usersDiv.current.offsetWidth * usersDiv.current.offsetWidth) /\n      //   2\n      // setDimension(d)\n      var n = 0\n      if (show) {\n        n++\n      }\n      n += peersRef.current.filter(peer => peer.show === true).length\n      if (n == 0) {\n        setShowDetails(true)\n      } else {\n        setShowDetails(false)\n      }\n      var numCol = Math.sqrt(n)\n      if (usersDiv.current.offsetHeight < usersDiv.current.offsetWidth) {\n        numCol = Math.ceil(numCol)\n      } else {\n        numCol = Math.floor(numCol)\n      }\n      setCol(numCol)\n      const numRow = Math.ceil(n / numCol)\n      setVideoHeight(usersDiv.current.offsetHeight / (1.2 * numRow))\n      setVideoWidth(usersDiv.current.offsetWidth / (1.2 * numCol))\n      console.log('dimension changed')\n      console.log(col)\n      // console.log(d)\n    }\n  }, [\n    usersDiv.current,\n    peers,\n    show,\n    chatBoxOpen,\n    allUsersBoxOpen,\n    peersRef.current.length\n  ])\n\n  useEffect(() => {\n    // let data = {\n    //   id: props.match.params.id,\n    //   sharing_id: props.match.params.code\n    // }\n    // data = JSON.stringify(data)\n    console.log('currentroom.id changes')\n    console.log(currentRoom)\n    props.getRoomDetails(props.match.params.id, () => {\n      console.log(currentRoom && currentRoom.created_by.pk == props.myuser.pk)\n      if (currentRoom && currentRoom.created_by.pk == props.myuser.pk) {\n        navigator.mediaDevices\n          .getUserMedia({ video: { videoConstraints }, audio: true })\n          .then(stream => {\n            console.log(stream)\n            userVideo.current.srcObject = stream\n            // duserVideo.current.srcObject = stream\n            localstream.current = stream\n            setMyVideoTrack(stream.getVideoTracks()[0])\n            setMystream(stream)\n          })\n          .catch(err => {\n            console.log(err)\n            toast.error('Cannot get access to your camera and video !')\n          })\n        console.log('admin hai ye')\n        setInLobby(false)\n      }\n      setRoomExists(true)\n    })\n  }, [currentRoom.id])\n\n  useEffect(() => {\n    if (roomExist) {\n      if (inLobby) {\n        navigator.mediaDevices\n          .getUserMedia({ video: { videoConstraints }, audio: true })\n          .then(stream => {\n            console.log(stream)\n            userVideo.current.srcObject = stream\n            // dUserVideo.current.srcObject = stream\n            localstream.current = stream\n            setMyVideoTrack(stream.getVideoTracks()[0])\n            setMystream(stream)\n          })\n          .catch(err => {\n            console.log(err)\n            toast.error('Cannot get access to your camera and video !')\n          })\n      } else {\n        if (Boolean(WebSocketInstance) && WebSocketInstance.socketRef) {\n          WebSocketInstance.close()\n        }\n        WebSocketInstance.connect(\n          `${window.location.protocol == 'http:' ? 'ws' : 'wss'}://${\n            window.location.host.includes('localhost:')\n              ? 'localhost:8000'\n              : window.location.hostname\n          }/ws/chat/${props.currentRoom.sharing_id}`\n        )\n        // WebSocketInstance.waitForSocketConnection(() => {\n        //   console.log('looping')\n        // })\n        setWebSocket(WebSocketInstance)\n        WebSocketInstance.sendSignal('join room', {\n          video,\n          audio,\n          onlyChat: false\n        })\n        WebSocketInstance.on('request invite', user => {\n          let presentInUsers =\n            props.currentRoom.all_users.indexOf(user.id) != -1\n          console.log(props.currentRoom.all_users)\n          console.log(user.id == props.currentRoom.created_by.pk)\n          console.log(\n            user.id == props.currentRoom.created_by.pk || presentInUsers\n          )\n          if (user.id == props.currentRoom.created_by.pk || presentInUsers) {\n            WebSocketInstance.sendSignal('accept invite', user.id)\n          } else if (\n            props.currentRoom.created_by.pk == props.myuser.pk &&\n            currentRoom.created_by.pk != user.id\n          ) {\n            toast(\n              t => (\n                <div>\n                  {user.email} wants to join{' '}\n                  <Button\n                    color='inherit'\n                    onClick={() => handleUserAccept(t.id, user.id)}\n                  >\n                    accept\n                  </Button>\n                  <Button\n                    color='inherit'\n                    onClick={() => handleUserReject(t.id, user.id)}\n                  >\n                    Decline\n                  </Button>\n                </div>\n              ),\n              {\n                icon: 'ðŸ‘¤',\n                duration: 100000\n              }\n            )\n          }\n        })\n        WebSocketInstance.on('invite was rejected', payload => {\n          console.log(props.myuser.pk == payload.id)\n          if (props.myuser.pk == payload.id) {\n            alert('Admin rejected your request')\n            history.push('/')\n          }\n        })\n        WebSocketInstance.on('all users', payload => {\n          if (pendingRequest == true) {\n            console.log('pending req was true')\n            setPendingRequest(false)\n            userVideo.current.srcObject = localstream.current\n          }\n          if (payload.id == props.myuser.pk) {\n            console.log('all users received')\n            console.log(payload.users)\n            const allPeers = []\n            payload.users.forEach(user => {\n              if (user[0] !== props.myuser.pk) {\n                if (!Boolean(peersRef.current.some(e => e.peerID == user[0]))) {\n                  console.log(localstream.current)\n                  const peer = createPeer(\n                    user[0],\n                    props.myuser.pk,\n                    localstream.current\n                  )\n                  peersRef.current.push({\n                    peerID: user[0],\n                    peerName: user[1],\n                    video: user[2],\n                    audio: user[3],\n                    show: true,\n                    peer\n                  })\n                  allPeers.push({\n                    peerID: user[0],\n                    peerName: user[1],\n                    video: user[2],\n                    audio: user[3],\n                    show: true,\n                    peer\n                  })\n                  console.log('created peer ' + user[1])\n                }\n              }\n            })\n            setPeers(allPeers)\n            console.log('peers after all users')\n            console.log(peers)\n          }\n        })\n\n        WebSocketInstance.on('user joined', payload => {\n          // console.log(peersRef.current)\n          // setPeers(peersRef.current)\n          console.log(payload.userID)\n          if (payload.userID === props.myuser.pk) {\n            if (\n              !Boolean(\n                peersRef.current.some(e => e.peerID == payload.caller[0])\n              )\n            ) {\n              const peer = addPeer(\n                payload.signal,\n                payload.caller,\n                localstream.current\n              )\n              toast(`${payload.caller[1]} joined the room.`, { icon: 'ðŸ‘' })\n              console.log(`${payload.caller[1]} joined the room.`)\n              peersRef.current.push({\n                peerID: payload.caller[0],\n                peerName: payload.caller[1],\n                video: payload.caller[2],\n                audio: payload.caller[3],\n                show: true,\n                peer\n              })\n\n              let peerObj = {\n                peerID: payload.caller[0],\n                peerName: payload.caller[1],\n                video: payload.caller[2],\n                audio: payload.caller[3],\n                show: true,\n                peer\n              }\n\n              setPeers([...peers, peerObj])\n\n              console.log('added peer')\n            }\n            console.log(peers)\n          }\n          // setPeers(peersRef.current)\n        })\n\n        WebSocketInstance.on('receiving returned signal', payload => {\n          console.log('receiving returned signal')\n          if (payload.userID === props.myuser.pk) {\n            const item = peersRef.current.find(p => p.peerID === payload.id)\n            item.peer.signal(payload.signal)\n          }\n          // setPeers(peersRef.current)\n          console.log(peers)\n        })\n\n        WebSocketInstance.on('user left', id => {\n          const peerObj = peersRef.current.find(p => p.peerID === id)\n          if (peerObj) {\n            toast(`${peerObj.peerName} left.`, { icon: 'â„¹ï¸' })\n\n            peerObj.peer.destroy()\n          }\n          const allPeers = peersRef.current.filter(p => p.peerID !== id)\n          peersRef.current = allPeers\n          setPeers(allPeers)\n        })\n\n        WebSocketInstance.on('message received', payload => {\n          // const msgObj = {\n          //   user: payload.user,\n          //   msg: payload.message\n          // }\n          // setAllMessages(messages => [...messages, msgObj])\n          payload.user = JSON.parse(payload.user)\n          if (\n            props.myuser.first_name != payload.user.first_name &&\n            !chatBoxOpen\n          ) {\n            toast(`${payload.user.first_name} : ${payload.message}`, {\n              icon: 'ðŸ’¬'\n            })\n          }\n          // console.log(allMessages)\n          props.addMessage(payload)\n        })\n\n        WebSocketInstance.on('toggle video', payload => {\n          if (payload.id == props.myuser.pk) {\n            setVideo(payload.value)\n          } else {\n            var newPeers = peersRef.current\n            for (var i in newPeers) {\n              if (newPeers[i].peerID == payload.id) {\n                newPeers[i].video = payload.value\n                break //Stop this loop, we found it!\n              }\n            }\n            setPeers([...newPeers])\n            peersRef.current = newPeers\n          }\n        })\n\n        WebSocketInstance.on('toggle audio', payload => {\n          if (payload.id == props.myuser.pk) {\n            setAudio(payload.value)\n          } else {\n            var newPeers = peersRef.current\n            for (var i in newPeers) {\n              if (newPeers[i].peerID == payload.id) {\n                newPeers[i].audio = payload.value\n                break //Stop this loop, we found it!\n              }\n            }\n            setPeers([...newPeers])\n            peersRef.current = newPeers\n          }\n        })\n      }\n    }\n  }, [roomExist, inLobby])\n\n  const handleAvatarBtnClick = event => {\n    console.log(event.currentTarget)\n    setAnchorAvatarEl(event.currentTarget)\n  }\n\n  const handleAvatarBtnClose = () => {\n    setAnchorAvatarEl(null)\n  }\n\n  const handleSearchUser = e => {\n    setSearchUser(e.target.value)\n  }\n\n  function handleUserAccept (toast_id, user_id) {\n    WebSocketInstance.sendSignal('accept invite', user_id)\n    toast.dismiss(toast_id)\n  }\n\n  function handleUserReject (toast_id, user_id) {\n    WebSocketInstance.sendSignal('reject invite', user_id)\n    toast.dismiss(toast_id)\n  }\n\n  function createPeer (userToSignal, callerID, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream\n    })\n\n    peer.on('signal', signal => {\n      WebSocketInstance.sendSignal('sending signal', {\n        userToSignal,\n        callerID,\n        signal\n      })\n    })\n\n    return peer\n  }\n\n  function addPeer (incomingSignal, caller, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream\n    })\n    let callerID = caller[0]\n    peer.on('signal', signal => {\n      WebSocketInstance.sendSignal('returning signal', { signal, callerID })\n    })\n\n    peer.signal(incomingSignal)\n\n    return peer\n  }\n\n  function shareScreen () {\n    setMyVideoTrack(localstream.current.getVideoTracks()[0])\n    console.log(myVideoTrack)\n    navigator.mediaDevices\n      .getDisplayMedia({ video: { cursor: 'always' }, audio: 'true' })\n      .then(screenStream => {\n        for (let index = 0; index < peersRef.current.length; index++) {\n          console.log(screenStream.getVideoTracks()[0])\n          peersRef.current[index].peer.replaceTrack(\n            localstream.current.getVideoTracks()[0],\n            screenStream.getVideoTracks()[0],\n            localstream.current\n          )\n        }\n        setPeers([...peersRef.current])\n        localstream.current.removeTrack(localstream.current.getVideoTracks()[0])\n        localstream.current.addTrack(screenStream.getVideoTracks()[0])\n        screenStream.getVideoTracks()[0].onended = function () {\n          for (let index = 0; index < peersRef.current.length; index++) {\n            peersRef.current[index].peer.replaceTrack(\n              localstream.current.getVideoTracks()[0],\n              myVideoTrack,\n              localstream.current\n            )\n          }\n          setPeers([...peersRef.current])\n          localstream.current.removeTrack(\n            localstream.current.getVideoTracks()[0]\n          )\n          localstream.current.addTrack(myVideoTrack)\n        }\n      })\n  }\n\n  function handleMessageSend () {\n    WebSocketInstance.sendSignal('send_message', message)\n    setMessage('')\n  }\n\n  function handleKeyPress (event) {\n    if(event.key === 'Enter'){\n      handleMessageSend()\n    }\n  }\n\n  function handleMessageChange (event) {\n    setMessage(event.target.value)\n  }\n\n  function togglePeerShow (peer) {\n    var newPeers = peersRef.current\n    for (var i in newPeers) {\n      if (newPeers[i].peerID == peer.peerID) {\n        newPeers[i].show = !newPeers[i].show\n        break //Stop this loop, we found it!\n      }\n    }\n    setPeers([...newPeers])\n    peersRef.current = newPeers\n    console.log(peersRef.current)\n  }\n\n  function toggleChatBoxOpen () {\n    setAllUsersBoxOpen(false)\n    setChatBoxOpen(!chatBoxOpen)\n  }\n\n  function toggleAllUsersBoxOpen () {\n    setChatBoxOpen(false)\n    setAllUsersBoxOpen(!allUsersBoxOpen)\n  }\n\n  function handleJoinRoom () {\n    console.log('joining room')\n    setPendingRequest(true)\n    setInLobby(false)\n  }\n\n  function toggleShow () {\n    if (show) {\n      setShow(false)\n    } else {\n      setShow(true)\n      if (userVideo.current) {\n        userVideo.current.srcObject = localstream.current\n      }\n    }\n  }\n\n  function handleVideoToggle () {\n    localstream.current.getVideoTracks()[0].enabled = !localstream.current.getVideoTracks()[0]\n      .enabled\n    if (inLobby) {\n      setVideo(!video)\n    } else {\n      WebSocketInstance.sendSignal('toggle video')\n    }\n  }\n  function handleAudioToggle () {\n    localstream.current.getAudioTracks()[0].enabled = !localstream.current.getAudioTracks()[0]\n      .enabled\n    // setAudio(!audio)\n    if (inLobby) {\n      setAudio(!audio)\n    } else {\n      WebSocketInstance.sendSignal('toggle audio')\n    }\n  }\n  function handleDisconnect () {\n    console.log(mystream)\n    const tracks = mystream && mystream.getTracks()\n    tracks.map(track => {\n      track.stop()\n    })\n    // localstream.current.getTracks()[0].stop();\n    // WebSocketInstance.close()\n    history.push(`/room/${currentRoom.id}`)\n  }\n  console.log(pendingRequest)\n  console.log(inLobby)\n  console.log(peers)\n  return roomExist ? (\n    !inLobby && !pendingRequest ? (\n      <div className={classes.chatRoom}>\n        <Toaster />\n        <div className={classes.chatRoomMainDiv}>\n          <Grid\n            // xs={chatBoxOpen ? 6 : 12}\n            container\n            spacing={2}\n            className={classes.paper}\n            ref={usersDiv}\n            style={{\n              gridTemplateColumns: `repeat(${col},1fr)`,\n              position: showDetails ? 'relative' : ''\n            }}\n          >\n            <Grid className={classes.actionButtons}>\n              <Button onClick={handleVideoToggle}>\n                {video ? <VideocamIcon /> : <VideocamOffIcon />}\n              </Button>\n              <Button onClick={handleAudioToggle}>\n                {audio ? <MicIcon /> : <MicOffIcon />}\n              </Button>\n              <Button onClick={toggleChatBoxOpen}>\n                <ChatIcon />\n              </Button>\n              <Button\n                className={classes.desktopButton}\n                onClick={toggleAllUsersBoxOpen}\n              >\n                <GroupIcon />\n              </Button>\n              <Button\n                style={{ backgroundColor: 'red' }}\n                onClick={handleDisconnect}\n              >\n                <CallEndIcon />\n              </Button>\n              <Button className={classes.desktopButton} onClick={shareScreen}>\n                <ScreenShareIcon />\n              </Button>\n              <Button\n                className={classes.desktopButton}\n                onClick={() => setShowRoomDetailModal(true)}\n              >\n                <DetailsIcon />\n              </Button>\n              <Button\n                aria-controls='avatar-dropdown'\n                content='avatar'\n                // variant='contained'\n                // color='secondary'\n                // aria-haspopup='true'\n                // color='inherit'\n                // size='large'\n                className={classes.mobileButton}\n                // className='header-title-button'\n                onClick={handleAvatarBtnClick}\n                startIcon={<MoreVertIcon />}\n              />\n              <Menu\n                id='avatar-dropdown'\n                anchorEl={anchorAvatarEl}\n                // keepMounted\n                open={Boolean(anchorAvatarEl)}\n                onClose={handleAvatarBtnClose}\n                style={{ marginBottom: '30px' }}\n                // style={{ marginTop: '30px' }}\n              >\n                <MenuItem onClick={toggleAllUsersBoxOpen}>\n                  Manage Users\n                </MenuItem>\n                <MenuItem onClick={shareScreen}>Share Screen</MenuItem>\n                <MenuItem onClick={() => setShowRoomDetailModal(true)}>\n                  View Details\n                </MenuItem>\n              </Menu>\n            </Grid>\n            {showRoomDetailModal && (\n              <RoomDetailsModal\n                show={showRoomDetailModal}\n                meeting={false}\n                onClose={() => setShowRoomDetailModal(false)}\n              />\n            )}\n            {showDetails && <RoomData meeting={false} />}\n            <UserCard\n              key={props.myuser.pk - 100}\n              video={video}\n              audio={audio}\n              dimensions={dimension / Math.sqrt(2 + peersRef.current.length)}\n              width={videoWidth}\n              height={videoHeight}\n              show={show}\n              refer={userVideo}\n              name={props.myuser.first_name}\n              numpeers={peersRef.current.length}\n            />\n            {/* <UserCard\n              key={props.myuser.pk}\n              video={video}\n              audio={audio}\n              dimensions={dimension / Math.sqrt(2 + peersRef.current.length)}\n              width={videoWidth}\n              height={videoHeight}\n              refer={duserVideo}\n              name={props.myuser.first_name}\n              numpeers={peersRef.current.length}\n            /> */}\n\n            {peersRef.current.map(peer => {\n              console.log(peer)\n              return (\n                <UserCard\n                  key={peer.peerID}\n                  video={peer.video}\n                  audio={peer.audio}\n                  dimensions={\n                    dimension / Math.sqrt(2 + peersRef.current.length)\n                  }\n                  width={videoWidth}\n                  height={videoHeight}\n                  refer={null}\n                  show={peer.show}\n                  peer={peer}\n                  name={peer.peerName}\n                  numpeers={peersRef.current.length}\n                />\n              )\n            })}\n          </Grid>\n          {chatBoxOpen ? (\n            <Grid className={classes.chatBox}>\n              <Grid className={classes.chatBoxIntro}>\n                <IconButton>\n                  <ArrowBackIcon onClick={toggleChatBoxOpen} />\n                </IconButton>\n              </Grid>\n              <ChatBox />\n              <Grid className={classes.chatBoxInput}>\n                <TextField\n                  color='secondary'\n                  className={classes.textfield}\n                  onChange={handleMessageChange}\n                  onKeyPress={handleKeyPress}\n                  value={message}\n                  name='message'\n                  variant='outlined'\n                  autoComplete={false}\n                  label=''\n                  placeholder='Enter your msg'\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position='end'>\n                        <IconButton>\n                          <SvgIcon onClick={handleMessageSend}>\n                            <SendIcon />\n                          </SvgIcon>\n                        </IconButton>\n                      </InputAdornment>\n                    )\n                  }}\n                />\n              </Grid>\n            </Grid>\n          ) : (\n            ''\n          )}\n          {allUsersBoxOpen ? (\n            <Grid className={classes.chatBox}>\n              <Grid className={classes.chatBoxIntro}>\n                <IconButton>\n                  <ArrowBackIcon onClick={toggleAllUsersBoxOpen} />\n                </IconButton>\n              </Grid>\n              <Grid>\n                <List>\n                  <ListItem key='RemySharp'>\n                    <ListItemIcon>\n                      <Avatar color='inherit'>\n                        {props.myuser.first_name[0]}\n                      </Avatar>\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={props.myuser.first_name}\n                    ></ListItemText>\n                    <IconButton onClick={handleVideoToggle}>\n                      {video ? <VideocamIcon /> : <VideocamOffIcon />}\n                    </IconButton>\n                    <IconButton onClick={handleAudioToggle}>\n                      {audio ? <MicIcon /> : <MicOffIcon />}\n                    </IconButton>\n                    <IconButton onClick={() => toggleShow()}>\n                      {show ? <GridOnIcon /> : <GridOffIcon />}\n                    </IconButton>\n                  </ListItem>\n                </List>\n                <Divider />\n                <Grid item xs={12} style={{ padding: '10px' }}>\n                  <TextField\n                    id='outlined-basic-email'\n                    label='Search'\n                    name={searchUser}\n                    value={searchUser}\n                    onChange={handleSearchUser}\n                    variant='outlined'\n                    fullWidth\n                  />\n                </Grid>\n                <Divider />\n                <List>\n                  {peersRef.current.map(peer => {\n                    console.log(searchUser)\n                    return (\n                      <ListItem style={{display: peer.peerName.includes(searchUser) ? '' : 'none'}} key='RemySharp'>\n                        <ListItemIcon>\n                          <Avatar color='inherit'>{peer.peerName[0]}</Avatar>\n                        </ListItemIcon>\n                        <ListItemText primary={peer.peerName}>\n                          Remy Sharp\n                        </ListItemText>\n                        <IconButton disabled>\n                          {peer.video ? (\n                            <VideocamIcon disabled />\n                          ) : (\n                            <VideocamOffIcon disabled />\n                          )}\n                        </IconButton>\n                        <IconButton disabled>\n                          {peer.audio ? (\n                            <MicIcon disabled />\n                          ) : (\n                            <MicOffIcon disabled />\n                          )}\n                        </IconButton>\n                        <IconButton onClick={() => togglePeerShow(peer)}>\n                          {peer.show ? <GridOnIcon /> : <GridOffIcon />}\n                        </IconButton>\n                      </ListItem>\n                    )\n                  })}\n                </List>\n              </Grid>\n            </Grid>\n          ) : (\n            ''\n          )}\n        </div>\n      </div>\n    ) : (\n      <div>\n        <div className={classes.introLobby}>\n          <UserCard\n            key={props.myuser.pk}\n            video={video}\n            audio={audio}\n            dimensions={dimension / Math.sqrt(1 + peersRef.current.length)}\n            width={videoWidth}\n            show={show}\n            height={videoHeight}\n            refer={userVideo}\n            name={props.myuser.first_name}\n            numpeers={peersRef.current.length}\n          />\n          <div>\n            <Button onClick={handleVideoToggle}>\n              {video ? <VideocamIcon /> : <VideocamOffIcon />}\n            </Button>\n            <Button onClick={handleAudioToggle}>\n              {audio ? <MicIcon /> : <MicOffIcon />}\n            </Button>\n            <Button onClick={handleJoinRoom} disabled={pendingRequest}>\n              Join room\n            </Button>\n          </div>\n        </div>\n        <RoomData meeting={false} />\n      </div>\n    )\n  ) : (\n    <div>Room doesnt exist</div>\n  )\n})\n\nconst mapStateToprops = state => {\n  return {\n    myuser: state.auth.user,\n    currentRoom: state.room.currentRoom,\n    token: state.auth.token,\n    messages: state.room.messages,\n    userDimension: state.room.userDimension\n  }\n}\n\nconst mapDispatchToprops = dispatch => {\n  return {\n    getRoomDetails: (id, handleSuccess) => {\n      return dispatch(getRoomDetails(id, handleSuccess))\n    },\n    getAllMessages: (id, callback) => {\n      return dispatch(getAllMessages(id, callback))\n    },\n    addMessage: message => {\n      return dispatch(addMessage(message))\n    },\n    setUserDimension: dimension => {\n      return dispatch(setUserDimension(dimension))\n    }\n  }\n}\nexport default withRouter(connect(mapStateToprops, mapDispatchToprops)(Room))\n\n// width={\n//   peers.length == 0 || usersDiv.current.offsetWidth < 1400\n//     ? usersDiv.current.offsetWidth / 1.3\n//     : usersDiv.current.offsetWidth / 2.2\n// }\n// height={\n//   peers.length == 0\n//     ? usersDiv.current.offsetHeight / 1.3\n//     : usersDiv.current.offsetWidth < 1400\n//     ? usersDiv.current.offsetHeight / 2.3\n//     : usersDiv.current.offsetHeight / 1.3\n// }\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { logoutUser } from '../actions/authAction'\nimport VideoPlayer from '../components/video/videoPlayer.js'\n\nclass VideoView extends Component {\n  render () {\n    return (\n      <div style={{height:'90vh'}} className='VideoView'>\n        <VideoPlayer />\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.auth.user\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logoutUser: () => {\n      return dispatch(logoutUser())\n    }\n  }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(VideoView)\n"],"sourceRoot":""}